name: Executar scripts R diariamente
on:
  schedule:
  - cron: "40 17 * * *"  # Executar todos os dias às 00:00 UTC

jobs:
  build:
    runs-on: windows-latest

    steps:
    - name: Verificar código
      uses: actions/checkout@master
    - name: Configurar R
      uses: r-lib/actions/setup-r@v2
      with:
        r-version: '4.3'

    - name: Update Time Series
      run: Rscript series.R

    - name: Launch shinyapp
      run: Rscript updateapp.R
      
    - name: Send mail
      uses: dawidd6/action-send-mail@v2
      with:
        server_address: smtp.gmail.com
        server_port: 587
        username: htoshioolyntho@gmail.com
        password: ${{secrets.PASSWORD}}
        subject: Github Actions job result
        to: htoshioolyntho@hotmail.com
        from: htoshioolyntho@gmail.com
        body: Build job of completed successfully!
           https://h172284.shinyapps.io/ME607_1S2023/
